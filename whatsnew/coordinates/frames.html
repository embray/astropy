<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Using and Designing Coordinate Frames &mdash; Astropy v1.0.dev9586</title>
    
    <link rel="stylesheet" href="../_static/bootstrap-astropy.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.dev9586',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/sidebar.js"></script>
    <link rel="shortcut icon" href="../_static/astropy_logo.ico"/>
    <link rel="top" title="Astropy v1.0.dev9586" href="../index.html" />
    <link rel="up" title="Astronomical Coordinate Systems (astropy.coordinates)" href="index.html" />
    <link rel="next" title="Example: Defining A Coordinate Frame for the Sgr Dwarf" href="sgr-example.html" />
    <link rel="prev" title="Using and Designing Coordinate Representations" href="representations.html" />
<link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'>
<script type="text/javascript" src="../_static/copybutton.js"></script>


  </head>
  <body>
<div class="topbar">
  <a class="brand" title="Documentation Home" href="../index.html"><span id="logotext1">astro</span><span id="logotext2">py</span><span id="logotext3">:docs</span></a>
  <ul>
    <li><a class="homelink" title="Astropy Homepage" href="http://www.astropy.org"></a></li>
    <li><a title="General Index" href="../genindex.html">Index</a></li>
    <li><a title="Module Index" href="../py-modindex.html">Modules</a></li>
    <li>
      
      
<form action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
      
    </li>
  </ul>
</div>

<div class="related">
    <h3>Navigation</h3>
    <ul>
      <li class="right">
	<a href="sgr-example.html" title="Example: Defining A Coordinate Frame for the Sgr Dwarf">
	  next &raquo;
	</a>
      </li>
      <li class="right">
	<a href="representations.html" title="Using and Designing Coordinate Representations">
	  &laquo; previous
	</a>
	 |
      </li>
      <li>
	<a href="../index.html">Astropy v1.0.dev9586</a>
	 &raquo;
      </li>
      <li><a href="index.html" accesskey="U">Astronomical Coordinate Systems (<tt class="docutils literal"><span class="pre">astropy.coordinates</span></tt>)</a> &raquo;</li>
      
      <li>Using and Designing Coordinate Frames</li> 
    </ul>
</div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="using-and-designing-coordinate-frames">
<h1>Using and Designing Coordinate Frames<a class="headerlink" href="#using-and-designing-coordinate-frames" title="Permalink to this headline">¶</a></h1>
<p>In <a class="reference internal" href="index.html#module-astropy.coordinates" title="astropy.coordinates"><tt class="xref py py-obj docutils literal"><span class="pre">astropy.coordinates</span></tt></a>, as outlined in the
<a class="reference internal" href="index.html#astropy-coordinates-overview"><em>Overview of astropy.coordinates concepts</em></a>, subclasses of <a class="reference internal" href="../api/astropy.coordinates.BaseCoordinateFrame.html#astropy.coordinates.BaseCoordinateFrame" title="astropy.coordinates.BaseCoordinateFrame"><tt class="xref py py-obj docutils literal"><span class="pre">BaseCoordinateFrame</span></tt></a> (&#8220;frame
classes&#8221;) define particular coordinate frames. They can (but do not
<em>have</em> to) contain representation objects storing the actual coordinate
data. The actual coordinate transformations are defined as functions
that transform representations between frame classes.  This approach
serves to separate high-level user functionality (see <a class="reference internal" href="skycoord.html"><em>Using the SkyCoord High-level Class</em></a>)
and details of how the coordinates are actually stored (see
<a class="reference internal" href="representations.html"><em>Using and Designing Coordinate Representations</em></a>) from the definition of frames and how they are
transformed.</p>
<div class="section" id="using-frame-objects">
<h2>Using Frame Objects<a class="headerlink" href="#using-frame-objects" title="Permalink to this headline">¶</a></h2>
<div class="section" id="frames-without-data">
<h3>Frames without Data<a class="headerlink" href="#frames-without-data" title="Permalink to this headline">¶</a></h3>
<p>Frame objects have two distinct (but related) uses.  The first is
storing the information needed to uniquely define a frame (e.g.,
equinox, observation time). This information is stored on the frame
objects as (read-only) Python attributes, which are set with the object
is first created:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.coordinates</span> <span class="kn">import</span> <span class="n">ICRS</span><span class="p">,</span> <span class="n">FK5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FK5</span><span class="p">(</span><span class="n">equinox</span><span class="o">=</span><span class="s">&#39;J1975&#39;</span><span class="p">)</span>
<span class="go">&lt;FK5 Frame: equinox=J1975.000&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ICRS</span><span class="p">()</span>  <span class="c"># has no attributes</span>
<span class="go">&lt;ICRS Frame&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FK5</span><span class="p">()</span>  <span class="c"># uses default equinox</span>
<span class="go">&lt;FK5 Frame: equinox=J2000.000&gt;</span>
</pre></div>
</div>
<p>The specific names of attributes available for a particular frame (and
their default values)  are available as the class method
<tt class="docutils literal"><span class="pre">get_frame_attr_names</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">FK5</span><span class="o">.</span><span class="n">get_frame_attr_names</span><span class="p">()</span>
<span class="go">{&#39;equinox&#39;: &lt;Time object: scale=&#39;utc&#39; format=&#39;jyear_str&#39; value=J2000.000&gt;}</span>
</pre></div>
</div>
<p>You can access any of the attributes on a frame by using standard Python
attribute access.  Note that for cases like <tt class="docutils literal"><span class="pre">equinox</span></tt>, which are time
inputs, if you pass in any unambiguous time string, it will be converted
into an <a class="reference internal" href="../api/astropy.time.Time.html#astropy.time.Time" title="astropy.time.Time"><tt class="xref py py-obj docutils literal"><span class="pre">Time</span></tt></a> object with UTC scale (see
<a class="reference internal" href="../time/index.html#astropy-time-inferring-input"><em>Inferring input format</em></a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">FK5</span><span class="p">(</span><span class="n">equinox</span><span class="o">=</span><span class="s">&#39;J1975&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">equinox</span>
<span class="go">&lt;Time object: scale=&#39;utc&#39; format=&#39;jyear_str&#39; value=J1975.000&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">FK5</span><span class="p">(</span><span class="n">equinox</span><span class="o">=</span><span class="s">&#39;2011-05-15T12:13:14&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">equinox</span>
<span class="go">&lt;Time object: scale=&#39;utc&#39; format=&#39;isot&#39; value=2011-05-15T12:13:14.000&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="frames-with-data">
<h3>Frames with Data<a class="headerlink" href="#frames-with-data" title="Permalink to this headline">¶</a></h3>
<p>The second use for frame objects is to store actual realized coordinate
data for frames like those described above. In this use, it is similar
to the <a class="reference internal" href="../api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord" title="astropy.coordinates.SkyCoord"><tt class="xref py py-obj docutils literal"><span class="pre">SkyCoord</span></tt></a> class, and in fact, the <a class="reference internal" href="../api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord" title="astropy.coordinates.SkyCoord"><tt class="xref py py-obj docutils literal"><span class="pre">SkyCoord</span></tt></a> class internally
uses the frame classes as its implementation.  However, the frame
classes have fewer &#8220;convenience&#8221; features, thereby keeping the
implementation of frame classes simple.  As such, they are created
similarly to <a class="reference internal" href="../api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord" title="astropy.coordinates.SkyCoord"><tt class="xref py py-obj docutils literal"><span class="pre">SkyCoord</span></tt></a> object.  The simplest way is to use
with keywords appropriate for the frame (e.g. <tt class="docutils literal"><span class="pre">ra</span></tt> and <tt class="docutils literal"><span class="pre">dec</span></tt> for
equatorial systems):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy</span> <span class="kn">import</span> <span class="n">units</span> <span class="k">as</span> <span class="n">u</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">ICRS</span><span class="p">(</span><span class="n">ra</span><span class="o">=</span><span class="mf">1.1</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">dec</span><span class="o">=</span><span class="mf">2.2</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span>
<span class="go">&lt;ICRS Coordinate: ra=1.1 deg, dec=2.2 deg&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FK5</span><span class="p">(</span><span class="n">ra</span><span class="o">=</span><span class="mf">1.1</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">dec</span><span class="o">=</span><span class="mf">2.2</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">equinox</span><span class="o">=</span><span class="s">&#39;J1975&#39;</span><span class="p">)</span>
<span class="go">&lt;FK5 Coordinate: equinox=J1975.000, ra=1.1 deg, dec=2.2 deg&gt;</span>
</pre></div>
</div>
<p>These same attributes can be used to access the data in the frames, as
<a class="reference internal" href="../api/astropy.coordinates.Angle.html#astropy.coordinates.Angle" title="astropy.coordinates.Angle"><tt class="xref py py-obj docutils literal"><span class="pre">Angle</span></tt></a> objects (or <a class="reference internal" href="../api/astropy.coordinates.Angle.html#astropy.coordinates.Angle" title="astropy.coordinates.Angle"><tt class="xref py py-obj docutils literal"><span class="pre">Angle</span></tt></a> subclasses):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">coo</span> <span class="o">=</span> <span class="n">ICRS</span><span class="p">(</span><span class="n">ra</span><span class="o">=</span><span class="mf">1.1</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">dec</span><span class="o">=</span><span class="mf">2.2</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coo</span><span class="o">.</span><span class="n">ra</span>  
<span class="go">&lt;Longitude 1.1 deg&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coo</span><span class="o">.</span><span class="n">ra</span><span class="o">.</span><span class="n">value</span>  
<span class="go">1.1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">coo</span><span class="o">.</span><span class="n">ra</span><span class="o">.</span><span class="n">to</span><span class="p">(</span><span class="n">u</span><span class="o">.</span><span class="n">hourangle</span><span class="p">)</span>  
<span class="go">&lt;Longitude 0.07333333333333335 hourangle&gt;</span>
</pre></div>
</div>
<p>You can use the <tt class="docutils literal"><span class="pre">representation</span></tt> attribute in conjunction
with the <tt class="docutils literal"><span class="pre">representation_component_names</span></tt> attribute to figure out what
keywords are accepted by a particular class object.  The former will be the
representation class the system is expressed in (e.g.,
spherical for equatorial frames), and the latter will be a dictionary
mapping names for that frame to the attribute name on the representation
class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">astropy.units</span> <span class="kn">as</span> <span class="nn">u</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">icrs</span> <span class="o">=</span> <span class="n">ICRS</span><span class="p">(</span><span class="mi">1</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">icrs</span><span class="o">.</span><span class="n">representation</span>
<span class="go">&lt;class &#39;astropy.coordinates.representation.SphericalRepresentation&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">icrs</span><span class="o">.</span><span class="n">representation_component_names</span>
<span class="go">OrderedDict([(u&#39;ra&#39;, u&#39;lon&#39;), (u&#39;dec&#39;, u&#39;lat&#39;), (u&#39;distance&#39;, u&#39;distance&#39;)])</span>
</pre></div>
</div>
<p>The representation of the coordinate object can be changed, as shown
below.  This actually does <em>nothing</em> to the object internal data which
stores the coordinate values, but it changes the external view of that
data in two ways: (1) the object prints itself in accord with the
new representation, and (2) the available attributes change to match
those of the new representation (e.g. from <tt class="docutils literal"><span class="pre">ra,</span> <span class="pre">dec,</span> <span class="pre">distance</span></tt> to
<tt class="docutils literal"><span class="pre">x,</span> <span class="pre">y,</span> <span class="pre">z</span></tt>).  Setting the <tt class="docutils literal"><span class="pre">representation</span></tt> thus changes a <em>property</em>
of the object (how it appears) without changing the intrinsic object
itself which represents a point in 3d space.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.coordinates</span> <span class="kn">import</span> <span class="n">CartesianRepresentation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">icrs</span><span class="o">.</span><span class="n">representation</span> <span class="o">=</span> <span class="n">CartesianRepresentation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">icrs</span>  
<span class="go">&lt;ICRS Coordinate: x=0.999238614955 , y=0.0174417749028 , z=0.0348994967025 &gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">icrs</span><span class="o">.</span><span class="n">x</span>  
<span class="go">&lt;Quantity 0.9992386149554826&gt;</span>
</pre></div>
</div>
<p>The representation can also be set at the time of creating a coordinate
and affects the set of keywords used to supply the coordinate data.  For
example to create a coordinate with cartesian data do:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ICRS</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">1</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">kpc</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="mi">2</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">kpc</span><span class="p">,</span> <span class="n">z</span><span class="o">=</span><span class="mi">3</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">kpc</span><span class="p">,</span> <span class="n">representation</span><span class="o">=</span><span class="n">CartesianRepresentation</span><span class="p">)</span>
<span class="go">&lt;ICRS Coordinate: x=1.0 kpc, y=2.0 kpc, z=3.0 kpc&gt;</span>
</pre></div>
</div>
<p>For more information about the use of representations in coordinates see the
<a class="reference internal" href="skycoord.html#astropy-skycoord-representations"><em>Representations</em></a> section, and for details about the
representations themselves see <a class="reference internal" href="representations.html#astropy-coordinates-representations"><em>Using and Designing Coordinate Representations</em></a>.</p>
<p>There are two other ways to create frame classes with coordinates.  A
representation class can be passed in directly at creation, along with
any  frame attributes required:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.coordinates</span> <span class="kn">import</span> <span class="n">SphericalRepresentation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rep</span> <span class="o">=</span> <span class="n">SphericalRepresentation</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="mf">1.1</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="mf">2.2</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="mf">3.3</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">kpc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">FK5</span><span class="p">(</span><span class="n">rep</span><span class="p">,</span> <span class="n">equinox</span><span class="o">=</span><span class="s">&#39;J1975&#39;</span><span class="p">)</span>
<span class="go">&lt;FK5 Coordinate: equinox=J1975.000, ra=1.1 deg, dec=2.2 deg, distance=3.3 kpc&gt;</span>
</pre></div>
</div>
<p>A final way is to create a frame object from an already existing frame
(either one with or without data), using the <tt class="docutils literal"><span class="pre">realize_frame</span></tt> method. This
will yield a frame with the same attributes, but new data:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span> <span class="o">=</span> <span class="n">FK5</span><span class="p">(</span><span class="n">equinox</span><span class="o">=</span><span class="s">&#39;J1975&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span>
<span class="go">&lt;FK5 Frame: equinox=J1975.000&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">rep</span> <span class="o">=</span> <span class="n">SphericalRepresentation</span><span class="p">(</span><span class="n">lon</span><span class="o">=</span><span class="mf">1.1</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="mf">2.2</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="mf">3.3</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">kpc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f1</span><span class="o">.</span><span class="n">realize_frame</span><span class="p">(</span><span class="n">rep</span><span class="p">)</span>
<span class="go">&lt;FK5 Coordinate: equinox=J1975.000, ra=1.1 deg, dec=2.2 deg, distance=3.3 kpc&gt;</span>
</pre></div>
</div>
<p>You can check if a frame object has data using the <tt class="docutils literal"><span class="pre">has_data</span></tt> attribute, and
if it is preset, it can be accessed from the <tt class="docutils literal"><span class="pre">data</span></tt> attribute:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ICRS</span><span class="p">()</span><span class="o">.</span><span class="n">has_data</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cooi</span> <span class="o">=</span> <span class="n">ICRS</span><span class="p">(</span><span class="n">ra</span><span class="o">=</span><span class="mf">1.1</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">dec</span><span class="o">=</span><span class="mf">2.2</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cooi</span><span class="o">.</span><span class="n">has_data</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cooi</span><span class="o">.</span><span class="n">data</span>
<span class="go">&lt;UnitSphericalRepresentation lon=1.1 deg, lat=2.2 deg&gt;</span>
</pre></div>
</div>
<p>All of the above methods can also accept array data (or other Python
sequences) to create arrays of coordinates:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ICRS</span><span class="p">(</span><span class="n">ra</span><span class="o">=</span><span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">]</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">dec</span><span class="o">=</span><span class="p">[</span><span class="mf">3.5</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">]</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span>
<span class="go">&lt;ICRS Coordinate: (ra, dec) in deg</span>
<span class="go">    [(1.5, 3.5), (2.5, 4.5)]&gt;</span>
</pre></div>
</div>
<p>If you pass in mixed arrays and scalars, the arrays will be broadcast
over the scalars appropriately:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">ICRS</span><span class="p">(</span><span class="n">ra</span><span class="o">=</span><span class="p">[</span><span class="mf">1.5</span><span class="p">,</span> <span class="mf">2.5</span><span class="p">]</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">dec</span><span class="o">=</span><span class="p">[</span><span class="mf">3.5</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">]</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="mi">5</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">kpc</span><span class="p">)</span>
<span class="go">&lt;ICRS Coordinate: (ra, dec, distance) in (deg, deg, kpc)</span>
<span class="go">    [(1.5, 3.5, 5.0), (2.5, 4.5, 5.0)]&gt;</span>
</pre></div>
</div>
<p>An additional operation that may be useful is the ability to extract the
data in different representations.  E.g., to get the Cartesian form of
an ICRS coordinate:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.coordinates</span> <span class="kn">import</span> <span class="n">CartesianRepresentation</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cooi</span> <span class="o">=</span> <span class="n">ICRS</span><span class="p">(</span><span class="n">ra</span><span class="o">=</span><span class="mi">0</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">dec</span><span class="o">=</span><span class="mi">45</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">distance</span><span class="o">=</span><span class="mi">10</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">pc</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cooi</span><span class="o">.</span><span class="n">represent_as</span><span class="p">(</span><span class="n">CartesianRepresentation</span><span class="p">)</span>  
<span class="go">&lt;CartesianRepresentation x=7.07106781187 pc, y=0.0 pc, z=7.07106781187 pc&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="transforming-between-frames">
<h2>Transforming between Frames<a class="headerlink" href="#transforming-between-frames" title="Permalink to this headline">¶</a></h2>
<p>To transform a frame object with data into another frame, use the
<tt class="docutils literal"><span class="pre">transform_to</span></tt> method of an object, and provide it the frame you wish to
transform to.  This frame can either be a frame <em>class</em>, in which case
the default attributes will be used, or a frame object (with or without
data):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">cooi</span> <span class="o">=</span> <span class="n">ICRS</span><span class="p">(</span><span class="mf">1.5</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="mf">2.5</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cooi</span><span class="o">.</span><span class="n">transform_to</span><span class="p">(</span><span class="n">FK5</span><span class="p">)</span>  
<span class="go">&lt;FK5 Coordinate: equinox=J2000.000, ra=1.50000660527 deg, dec=2.50000238221 deg&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cooi</span><span class="o">.</span><span class="n">transform_to</span><span class="p">(</span><span class="n">FK5</span><span class="p">(</span><span class="n">equinox</span><span class="o">=</span><span class="s">&#39;J1975&#39;</span><span class="p">))</span>  
<span class="go">&lt;FK5 Coordinate: equinox=J1975.000, ra=1.17960348105 deg, dec=2.36085320826 deg&gt;</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="index.html#astropy-coordinates-api"><em>Reference/API</em></a> includes a list of all of the frames built
into <a class="reference internal" href="index.html#module-astropy.coordinates" title="astropy.coordinates"><tt class="xref py py-obj docutils literal"><span class="pre">astropy.coordinates</span></tt></a>, as well as the defined transformations between
them. Any transformation that has a valid path, even if it passes through
other frames, can be transformed to. To programmatically check for or
manipulate transformations, see the <a class="reference internal" href="../api/astropy.coordinates.TransformGraph.html#astropy.coordinates.TransformGraph" title="astropy.coordinates.TransformGraph"><tt class="xref py py-obj docutils literal"><span class="pre">TransformGraph</span></tt></a>
documentation.</p>
</div>
<div class="section" id="defining-a-new-frame">
<span id="astropy-coordinates-design"></span><h2>Defining a New Frame<a class="headerlink" href="#defining-a-new-frame" title="Permalink to this headline">¶</a></h2>
<p>Users can add new coordinate frames by creating new classes that are subclasses
of <a class="reference internal" href="../api/astropy.coordinates.BaseCoordinateFrame.html#astropy.coordinates.BaseCoordinateFrame" title="astropy.coordinates.BaseCoordinateFrame"><tt class="xref py py-obj docutils literal"><span class="pre">BaseCoordinateFrame</span></tt></a>.  Detailed instructions for
subclassing are in the docstrings for that class.  The key aspects are to
define the class attributes <tt class="docutils literal"><span class="pre">default_representation</span></tt> and
<tt class="docutils literal"><span class="pre">frame_specific_representation_info</span></tt> along with frame attributes as
<a class="reference internal" href="../api/astropy.coordinates.FrameAttribute.html#astropy.coordinates.FrameAttribute" title="astropy.coordinates.FrameAttribute"><tt class="xref py py-obj docutils literal"><span class="pre">FrameAttribute</span></tt></a> class instances (or subclasses like
<a class="reference internal" href="../api/astropy.coordinates.TimeFrameAttribute.html#astropy.coordinates.TimeFrameAttribute" title="astropy.coordinates.TimeFrameAttribute"><tt class="xref py py-obj docutils literal"><span class="pre">TimeFrameAttribute</span></tt></a>).  If these are
defined, there is often no need to define an <tt class="docutils literal"><span class="pre">__init__</span></tt> function, as the
initializer in <a class="reference internal" href="../api/astropy.coordinates.BaseCoordinateFrame.html#astropy.coordinates.BaseCoordinateFrame" title="astropy.coordinates.BaseCoordinateFrame"><tt class="xref py py-obj docutils literal"><span class="pre">BaseCoordinateFrame</span></tt></a> will probably behave
the way you want.  As an example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">astropy.coordinates</span> <span class="kn">import</span> <span class="n">BaseCoordinateFrame</span><span class="p">,</span> <span class="n">FrameAttribute</span><span class="p">,</span> <span class="n">TimeFrameAttribute</span><span class="p">,</span> <span class="n">RepresentationMapping</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">class</span> <span class="nc">MyFrame</span><span class="p">(</span><span class="n">BaseCoordinateFrame</span><span class="p">):</span>
<span class="gp">... </span>    <span class="c"># Specify how coordinate values are represented when outputted</span>
<span class="gp">... </span>     <span class="n">default_representation</span> <span class="o">=</span> <span class="n">SphericalRepresentation</span>
<span class="gp">...</span>
<span class="gp">... </span>     <span class="c"># Specify overrides to the default names and units for all available</span>
<span class="gp">... </span>     <span class="c"># representations (subclasses of BaseRepresentation).</span>
<span class="gp">... </span>     <span class="n">frame_specific_representation_info</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>         <span class="s">&#39;spherical&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">RepresentationMapping</span><span class="p">(</span><span class="n">reprname</span><span class="o">=</span><span class="s">&#39;lon&#39;</span><span class="p">,</span> <span class="n">framename</span><span class="o">=</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="n">defaultunit</span><span class="o">=</span><span class="n">u</span><span class="o">.</span><span class="n">rad</span><span class="p">),</span>
<span class="gp">... </span>                       <span class="n">RepresentationMapping</span><span class="p">(</span><span class="n">reprname</span><span class="o">=</span><span class="s">&#39;lat&#39;</span><span class="p">,</span> <span class="n">framename</span><span class="o">=</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="n">defaultunit</span><span class="o">=</span><span class="n">u</span><span class="o">.</span><span class="n">rad</span><span class="p">),</span>
<span class="gp">... </span>                       <span class="n">RepresentationMapping</span><span class="p">(</span><span class="n">reprname</span><span class="o">=</span><span class="s">&#39;distance&#39;</span><span class="p">,</span> <span class="n">framename</span><span class="o">=</span><span class="s">&#39;DIST&#39;</span><span class="p">,</span> <span class="n">defaultunit</span><span class="o">=</span><span class="bp">None</span><span class="p">)],</span>
<span class="gp">... </span>         <span class="s">&#39;unitspherical&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">RepresentationMapping</span><span class="p">(</span><span class="n">reprname</span><span class="o">=</span><span class="s">&#39;lon&#39;</span><span class="p">,</span> <span class="n">framename</span><span class="o">=</span><span class="s">&#39;R&#39;</span><span class="p">,</span> <span class="n">defaultunit</span><span class="o">=</span><span class="n">u</span><span class="o">.</span><span class="n">rad</span><span class="p">),</span>
<span class="gp">... </span>                           <span class="n">RepresentationMapping</span><span class="p">(</span><span class="n">reprname</span><span class="o">=</span><span class="s">&#39;lat&#39;</span><span class="p">,</span> <span class="n">framename</span><span class="o">=</span><span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="n">defaultunit</span><span class="o">=</span><span class="n">u</span><span class="o">.</span><span class="n">rad</span><span class="p">)],</span>
<span class="gp">... </span>         <span class="s">&#39;cartesian&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">RepresentationMapping</span><span class="p">(</span><span class="n">reprname</span><span class="o">=</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="n">framename</span><span class="o">=</span><span class="s">&#39;X&#39;</span><span class="p">),</span>
<span class="gp">... </span>                       <span class="n">RepresentationMapping</span><span class="p">(</span><span class="n">reprname</span><span class="o">=</span><span class="s">&#39;y&#39;</span><span class="p">,</span> <span class="n">framename</span><span class="o">=</span><span class="s">&#39;Y&#39;</span><span class="p">),</span>
<span class="gp">... </span>                       <span class="n">RepresentationMapping</span><span class="p">(</span><span class="n">reprname</span><span class="o">=</span><span class="s">&#39;z&#39;</span><span class="p">,</span> <span class="n">framename</span><span class="o">=</span><span class="s">&#39;Z&#39;</span><span class="p">)]</span>
<span class="gp">... </span>     <span class="p">}</span>
<span class="gp">...</span>
<span class="gp">... </span>     <span class="c"># Specify frame attributes required to fully specify the frame</span>
<span class="gp">... </span>     <span class="n">location</span> <span class="o">=</span> <span class="n">FrameAttribute</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
<span class="gp">... </span>     <span class="n">equinox</span> <span class="o">=</span> <span class="n">TimeFrameAttribute</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="s">&#39;B1950&#39;</span><span class="p">)</span>
<span class="gp">... </span>     <span class="n">obstime</span> <span class="o">=</span> <span class="n">TimeFrameAttribute</span><span class="p">(</span><span class="n">default</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">secondary_attribute</span><span class="o">=</span><span class="s">&#39;equinox&#39;</span><span class="p">)</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="n">MyFrame</span><span class="p">(</span><span class="n">R</span><span class="o">=</span><span class="mi">10</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">,</span> <span class="n">D</span><span class="o">=</span><span class="mi">20</span><span class="o">*</span><span class="n">u</span><span class="o">.</span><span class="n">deg</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">&lt;MyFrame Coordinate: equinox=B1950.000, location=None, obstime=B1950.000, R=0.174532... rad, D=0.349065... rad&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">equinox</span>
<span class="go">&lt;Time object: scale=&#39;utc&#39; format=&#39;byear_str&#39; value=B1950.000&gt;</span>
</pre></div>
</div>
<p>You can also define arbitrary methods for any added functionality you
want your frame to have that&#8217;s unique to that frame.  These methods will
be available in any <a class="reference internal" href="../api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord" title="astropy.coordinates.SkyCoord"><tt class="xref py py-obj docutils literal"><span class="pre">SkyCoord</span></tt></a> that is created using your user-defined
frame.</p>
<p>For examples of defining frame classes, the first place to look is
probably the source code for the frames that are included in astropy
(available at <tt class="docutils literal"><span class="pre">astropy.coordinates.builtin_frames</span></tt>).  These are not
&#8220;magic&#8221; in any way, and use all the same API and features available to
user-created frames.  A more annotated example is also available in the
<a class="reference internal" href="sgr-example.html#sgr-example"><em>Example: Defining A Coordinate Frame for the Sgr Dwarf</em></a> documentation section.</p>
</div>
<div class="section" id="defining-transformations">
<h2>Defining Transformations<a class="headerlink" href="#defining-transformations" title="Permalink to this headline">¶</a></h2>
<p>A frame may not be too useful without a way to transform coordinates
defined in it to or from other frames. Fortunately,
<a class="reference internal" href="index.html#module-astropy.coordinates" title="astropy.coordinates"><tt class="xref py py-obj docutils literal"><span class="pre">astropy.coordinates</span></tt></a> provides a framework to do just that.  The key
concept for these transformations is the frame transform graph,
available as <tt class="docutils literal"><span class="pre">astropy.coordinates.frame_transform_graph</span></tt>, an instance of
the <a class="reference internal" href="../api/astropy.coordinates.TransformGraph.html#astropy.coordinates.TransformGraph" title="astropy.coordinates.TransformGraph"><tt class="xref py py-obj docutils literal"><span class="pre">TransformGraph</span></tt></a> class.  This graph (in the
&#8220;graph theory&#8221; sense, not &#8220;plot&#8221;), stores all the transformations
between all of the builtin frames, as well as tools for finding shortest
paths through this graph to transform from any frame to any other.  All
of the power of this graph is available to user-created frames, meaning
that once you define even one transform from your frame to some frame in
the graph,  coordinates defined in your frame can be transformed to
<em>any</em> other frame in the graph.</p>
<p>The transforms themselves are represented as
<a class="reference internal" href="../api/astropy.coordinates.CoordinateTransform.html#astropy.coordinates.CoordinateTransform" title="astropy.coordinates.CoordinateTransform"><tt class="xref py py-obj docutils literal"><span class="pre">CoordinateTransform</span></tt></a> objects or their subclasses. The useful
subclasses/types of transformations are:</p>
<ul>
<li><p class="first"><a class="reference internal" href="../api/astropy.coordinates.FunctionTransform.html#astropy.coordinates.FunctionTransform" title="astropy.coordinates.FunctionTransform"><tt class="xref py py-obj docutils literal"><span class="pre">FunctionTransform</span></tt></a></p>
<blockquote>
<div><p>A transform that is defined as a function that takes a frame object
of one frame class and returns an object of another class.</p>
</div></blockquote>
</li>
<li><p class="first"><a class="reference internal" href="../api/astropy.coordinates.StaticMatrixTransform.html#astropy.coordinates.StaticMatrixTransform" title="astropy.coordinates.StaticMatrixTransform"><tt class="xref py py-obj docutils literal"><span class="pre">StaticMatrixTransform</span></tt></a></p>
</li>
<li><p class="first"><a class="reference internal" href="../api/astropy.coordinates.DynamicMatrixTransform.html#astropy.coordinates.DynamicMatrixTransform" title="astropy.coordinates.DynamicMatrixTransform"><tt class="xref py py-obj docutils literal"><span class="pre">DynamicMatrixTransform</span></tt></a></p>
<blockquote>
<div><p>These are both for transformations defined as a 3x3 matrix
transforming the Cartesian representation of one frame into the
target frame&#8217;s Cartesian representation.  The static version is for
the case where the matrix is independent of the frame attributes
(e.g., the ICRS-&gt;FK5 transformation, because ICRS has no frame
attributes).  The dynamic case is for transformations where the
transformation matrix depends on the frame attributes of either the
to or from frame.</p>
</div></blockquote>
</li>
</ul>
<p>Generally, it is not necessary to use these classes directly.  Instead,
use methods on <tt class="docutils literal"><span class="pre">frame_transform_graph</span></tt> that can be used as function
decorators.  Then just define functions that either do the actual
transformation (for FunctionTransform), or that compute the necessary
transformation matrices to transform. Then decorate the functions to
register these transformations with the frame transform graph:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">astropy.coordinates</span> <span class="kn">import</span> <span class="n">frame_transform_graph</span>

<span class="nd">@frame_transform_graph.transform</span><span class="p">(</span><span class="n">DynamicMatrixTransform</span><span class="p">,</span> <span class="n">ICRS</span><span class="p">,</span> <span class="n">FK5</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">icrs_to_fk5</span><span class="p">(</span><span class="n">icrscoord</span><span class="p">,</span> <span class="n">fk5frame</span><span class="p">):</span>
    <span class="o">...</span>

<span class="nd">@frame_transform_graph.transform</span><span class="p">(</span><span class="n">DynamicMatrixTransform</span><span class="p">,</span> <span class="n">FK5</span><span class="p">,</span> <span class="n">ICRS</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fk5_to_icrs</span><span class="p">(</span><span class="n">fk5coord</span><span class="p">,</span> <span class="n">icrsframe</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>If the transformation to your coordinate frame of interest is not
representable by a matrix operation, you can also specify a function to do
the actual transformation, and pass the
<a class="reference internal" href="../api/astropy.coordinates.FunctionTransform.html#astropy.coordinates.FunctionTransform" title="astropy.coordinates.FunctionTransform"><tt class="xref py py-obj docutils literal"><span class="pre">FunctionTransform</span></tt></a> class to the transform graph
decorator instead:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@frame_transform_graph.transform</span><span class="p">(</span><span class="n">FunctionTransform</span><span class="p">,</span> <span class="n">FK4NoETerms</span><span class="p">,</span> <span class="n">FK4</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">fk4_no_e_to_fk4</span><span class="p">(</span><span class="n">fk4noecoord</span><span class="p">,</span> <span class="n">fk4frame</span><span class="p">):</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>Furthermore, the <tt class="docutils literal"><span class="pre">frame_transform_graph</span></tt> does some caching and
optimization to speed up transformations after the first attempt to go
from one frame to another, and shortcuts steps where relevant (for
example, combining multiple static matrix transforms into a single
matrix).  Hence, in general, it is better to define whatever are the
most natural transformations for a user-defined frame, rather than
worrying about optimizing or caching a transformation to speed up the
process.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper"><h3>Page Contents</h3>
<ul>
<li><a class="reference internal" href="#">Using and Designing Coordinate Frames</a><ul>
<li><a class="reference internal" href="#using-frame-objects">Using Frame Objects</a><ul>
<li><a class="reference internal" href="#frames-without-data">Frames without Data</a></li>
<li><a class="reference internal" href="#frames-with-data">Frames with Data</a></li>
</ul>
</li>
<li><a class="reference internal" href="#transforming-between-frames">Transforming between Frames</a></li>
<li><a class="reference internal" href="#defining-a-new-frame">Defining a New Frame</a></li>
<li><a class="reference internal" href="#defining-transformations">Defining Transformations</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <p class="pull-right">
    <a href="http://github.com/astropy/astropy/tree/master/docs/coordinates/frames.rst">Edit This Page on Github</a> &nbsp;
    <a href="../_sources/coordinates/frames.txt"
       rel="nofollow">Page Source</a> &nbsp;
    <a href="#">Back to Top</a></p>
  <p>
    &copy; Copyright 2011-2014, The Astropy Developers.<br/>
    Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.2.2. &nbsp;
    Last built 15 Aug 2014. <br/>
  </p>
</footer>
  </body>
</html>